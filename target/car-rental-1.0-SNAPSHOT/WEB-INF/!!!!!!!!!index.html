<!DOCTYPE html>
<html lang="en">
<head>
</head>>
<body>
<h3>Sarafan</h3>
<div id="info"></div>
<table id="workers"></table>
<script>
    var workersTable = document.getElementById('workers'),
        info = document.getElementById('info');
    fetch('http://localhost:8081/cars')
        .then(
            response => {
                if (response.status !== 200) {
                    console.log('Looks like there was a problem. Status Code: ' +
                        response.status);
                    return;
                }

                // Examine the text in the response
                response.json().then(function (data) {
                    // var obj = JSON.parse(data)
                    getTableInfo(data)
                    // for (var key in data) {
                    //     var ul = document.createElement("ul");
                    //     for (var key2 in data[key]){
                    //         var li = document.createElement("li");
                    //         li.innerHTML = data[key][key2];
                    //         ul.appendChild(li);
                    //     }
                    //     document.body.appendChild(ul);
                    //     document.body.appendChild(document.createElement("br"));
                    //     document.body.appendChild(document.createElement("br"));
                    // }
                    // document.body.innerHTML += `<pre>${JSON.stringify(data)}</pre>`
                    // document.getElementById("data").innerHTML = JSON.stringify(data);
                    //console.log(data);
                });
            })
        .catch(err => console.log('Fetch Error :-S', err));

    function getTableInfo(data) {
        console.log(Array.isArray(data));
        let headerTr = document.createElement('tr');
        headerTr.innerHTML = `<th>ID</th><th>CarModel</th><th>CarStatus</th><th>TotalMileage</th>`;
        workersTable.appendChild(headerTr);
        for (var key in data) {
            var tr = document.createElement("tr");
            for (var key2 in data[key]) {
                var td = document.createElement("td");
                var obj = data[key][key2];
                td.innerHTML = JSON.stringify(obj);
                tr.appendChild(td);
            }
            document.body.appendChild(tr);
            document.body.appendChild(document.createElement("br"));
        }
        // info.innerHTML = `<h2>Компания: ${data[id]}</h2>
        //  <p>Адрес: ${data[carModel]}</p>
        //  <p>Дата основания: ${data.carStatus}</p>`;

        // data.forEach(function (elem) {
        //
        // });
    }
</script>
</body>
</html>